(this["webpackJsonpburning-airlines-react"]=this["webpackJsonpburning-airlines-react"]||[]).push([[0],{15:function(t,e,a){},37:function(t,e,a){},61:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a(1),r=a.n(s),c=a(30),i=a.n(c),o=(a(37),a(2)),l=a(3),h=a(5),d=a(4),u=(a(15),a(7)),j=a.n(u),b=a(13),f=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={confirmationData:[],flightNumber:"",flightTo:"",flightFrom:"",name:"",flightDay:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(t){var e=this,a="https://burning-airlines-2021.herokuapp.com/reservations/booking/"+this.props.match.params.reservationid;console.log(a),j.a.get(a).then((function(t){console.log("response:",t.data),e.setState({confirmationData:t.data}),e.setState({flightNumber:t.data[0].flight.flight_no}),e.setState({flightTo:t.data[0].flight.to}),e.setState({flightFrom:t.data[0].flight.from}),e.setState({name:t.data[0].user.name}),e.setState({flightDay:t.data[0].flight.date})})).catch(console.warn)}},{key:"render",value:function(){return console.log("user: ",this.state.confirmationData),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("h1",{children:"Thanks for booking with Burnt Airlines. Please check your emails for the confimation email that you will never recieve."}),Object(n.jsxs)("h4",{children:["Your confirmation code is: ",this.props.match.params.reservationid]}),Object(n.jsx)("br",{}),Object(n.jsx)("hr",{}),Object(n.jsx)("br",{}),Object(n.jsx)("h3",{children:"Your booking details: "}),Object(n.jsx)("br",{}),Object(n.jsxs)("ul",{className:"list-group",children:[Object(n.jsxs)("li",{className:"list-group-item",children:["Passenger Name:",this.state.name]}),Object(n.jsxs)("li",{className:"list-group-item",children:["Flying from ",Object(n.jsx)("em",{children:Object(n.jsx)("strong",{children:this.state.flightFrom})}),", to ",Object(n.jsx)("em",{children:Object(n.jsx)("strong",{children:this.state.flightTo})})]}),Object(n.jsxs)("li",{className:"list-group-item",children:["Date: ",this.state.flightDay]}),Object(n.jsxs)("li",{className:"list-group-item",children:["Flight number: ",this.state.flightNumber]})]}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{children:Object(n.jsx)(b.b,{className:"btn btn-primary",to:"/search",children:"Book another flight"})})]})}}]),a}(r.a.Component),p=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).state={selectedFlight:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(t){var e=this,a="https://burning-airlines-2021.herokuapp.com/flights/select/"+this.props.flightId;j.a.get(a).then((function(t){e.setState({selectedFlight:t.data})})).catch(console.warn)}},{key:"render",value:function(){var t=this.state.selectedFlight;return Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Date:"}),Object(n.jsx)("th",{children:"Flight No:"}),Object(n.jsx)("th",{children:"From:"}),Object(n.jsx)("th",{children:"To:"})]})}),Object(n.jsx)("tbody",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.date}),Object(n.jsx)("td",{children:t.flight_no}),Object(n.jsx)("td",{children:t.from}),Object(n.jsx)("td",{children:t.to})]})})]})})}}]),a}(r.a.Component),m="https://burning-airlines-2021.herokuapp.com/reservations/select/",g="https://burning-airlines-2021.herokuapp.com/users.json",O="https://burning-airlines-2021.herokuapp.com/flights/select/",x=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={flight:{},seatAllocated:"",selectedSeat:"",userSeats:[],flightData:[],row:0,col:0},t.fetchSelectedSeats=function(){var e=m+t.props.flightId;j.a.get(e).then((function(e){var a=t.state.flightData,n=t.state.userSeats;if(Array.isArray(e.data))for(var s=0;s<e.data.length;s++)n.push(e.data[s].seat_no);else a.push(e.data),n.push(t.state.flightData[0].seat_no);t.setState({userSeats:n})})).catch(console.warn)},t.fetchUsers=function(){j.a.get(g).then((function(e){t.setState({user:e.data})})).catch(console.warn)},t.fetchFlights=function(){var e=O+t.props.flightId;console.log("thisone:",e),j.a.get(e).then((function(e){console.log("response: ",e.data.airplane.row),t.setState({row:e.data.airplane.row}),t.setState({col:e.data.airplane.col}),t.setState({flight:e.data})})).catch(console.warn)},t.toggleSeatSelection=function(e){var a='"btn btn-secondary m-1 col-1 text-center" data-bs-toggle="button" ';return e===t.state.seatAllocated&&(a='"btn btn-primary m-1 active col-1 text-center" aria-pressed="false" disabled'),t.state.userSeats.forEach((function(t){e===t&&(a='"btn btn-danger m-1 active col-1 text-center"  aria-pressed="false" disabled occupied')})),a},t.toggleUpdateSeat=function(e){console.log("e:",e),e.preventDefault(),t.props.handleSeatPicked(e.target.innerText),t.setState({seatAllocated:e.target.innerText}),t.toggleSeatSelection(e.target.innerText)},t.createTable=function(e){for(var a=[],s="",r="",c=0;c<t.props.row;c++){for(var i=[],o=0;o<t.props.col;o++)s=String.fromCharCode(97+o).toUpperCase(),r="".concat(c+1).concat(s),i.push(Object(n.jsx)("div",{onClick:function(e){return t.toggleUpdateSeat(e)},className:t.toggleSeatSelection(r),id:r,children:r},c+o));a.push(Object(n.jsx)("div",{className:"row flex-nowrap justify-content-center",children:i},10*c+3))}return a},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchFlights(),this.fetchUsers(),this.fetchSelectedSeats()}},{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("hr",{}),Object(n.jsx)("h1",{children:"Seat Selection "}),Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsx)("div",{className:"container mx-auto",children:this.createTable(this.state.flight)})}),Object(n.jsx)("hr",{})]})}}]),a}(r.a.Component),v="https://burning-airlines-2021.herokuapp.com/flights.json",S="https://burning-airlines-2021.herokuapp.com/flights/",k=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={flights:[],fromVal:"",toVal:"",user_id:""},t.showFlights=function(){j.a.get(S).then((function(e){console.log("response:",e.data),t.setState({flights:e.data})})).catch(console.warn)},t.fetchFlights=function(){j.a.get(v).then((function(e){console.log("response:",e.data),t.setState({flights:e.data})})).catch(console.warn)},t}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.fetchFlights(),this.setState({user_id:this.props.userID})}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("h1",{children:"Flights"}),Object(n.jsxs)("table",{className:"text-center table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Flight date "}),Object(n.jsx)("th",{children:"Flight No "}),Object(n.jsx)("th",{children:"Flight From "}),Object(n.jsx)("th",{children:"Flight To "})]})}),Object(n.jsx)("tbody",{children:Object(n.jsx)(b.a,{children:this.props.searchData.map((function(e,a){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.date}),Object(n.jsx)("td",{children:Object(n.jsx)(b.b,{to:"/flight/"+e.id+"/"+t.state.user_id,children:e.flight_no})})," ",Object(n.jsx)("td",{children:e.from})," ",Object(n.jsx)("td",{children:e.to})," "]},a)}))})})]})]})}}]),a}(r.a.Component),y=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).handleClick=function(t){console.log(t),console.log("clicked value:",t.target.innerText,t.target.id),n.props.updateUser(t.target.innerText,t.target.id)},n.state={data:[],currentUser:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this;j.a.get("https://burning-airlines-2021.herokuapp.com/users.json").then((function(e){t.setState({data:e.data})})).catch(console.warn)}},{key:"render",value:function(){var t=this,e=(this.state.data.name,this.state.data.map((function(e){return Object(n.jsx)("li",{className:"dropdown-item",id:e.id,onClick:function(e){return t.handleClick(e)},children:e.name},e.id)})));return Object(n.jsxs)("div",{className:"dropdown",children:[Object(n.jsx)("button",{className:"nav-link dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:"User"}),Object(n.jsx)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:e})]})}}]),a}(r.a.Component),w=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(o.a)(this,a),(s=e.call(this,t)).componentDidMount=function(){j.a.get("https://burning-airlines-2021.herokuapp.com/flights.json").then((function(t){console.log("data: ",t.data),s.setState({data:t.data})})).catch(console.warn)},s.onlyUnique=function(t,e,a){return a.indexOf(t)===e},s.destinationFrom=function(){return s.state.data.map((function(t,e){return Object(n.jsx)("option",{value:t.from,children:t.from},e)})).filter(s.onlyUnique)},s.destinationTo=function(){return s.state.data.map((function(t,e){return Object(n.jsx)("option",{value:t.to,children:t.to},e)})).filter(s.onlyUnique)},s.showFlights=function(){var t="https://burning-airlines-2021.herokuapp.com/flights/"+s.state.fromVal+"/"+s.state.toVal;j.a.get(t).then((function(t){console.log("response:",t.data),s.setState({searchData:t.data}),s.runFunc()})).catch(console.warn)},s.runFunc=function(){console.log("data",s.state.searchData),s.props.searchData(s.state.searchData)},s.handleSubmit=function(t){t.preventDefault(),console.log("submited!!!",s.state.fromVal,s.state.toVal),s.showFlights()},s.handleChangeFrom=function(t){s.setState({fromVal:t.target.value})},s.handleChangeTo=function(t){s.setState({toVal:t.target.value})},s.state={fromVal:"",toVal:"",data:[],destinationFrom:[],searchData:[]},s}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{htmlFor:"from",className:"form-label",children:"From"}),Object(n.jsxs)("select",{className:"form-select","aria-describedby":"fromHelp",id:"from",onChange:this.handleChangeFrom,children:[Object(n.jsx)("option",{defaultValue:"",children:"Open this select menu"}),this.destinationFrom()]}),Object(n.jsx)("div",{id:"fromHelp",className:"form-text",children:"Where would you like to fly from?"})]}),Object(n.jsxs)("div",{className:"mb-3",children:[Object(n.jsx)("label",{htmlFor:"to",className:"form-label",children:"To"}),Object(n.jsxs)("select",{className:"form-select","aria-describedby":"toHelp",id:"to",onChange:this.handleChangeTo,children:[Object(n.jsx)("option",{defaultValue:"",children:"Open this select menu"}),this.destinationTo()]}),Object(n.jsx)("div",{id:"toHelp",className:"form-text",children:"Where would you like to fly to?"})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})}}]),a}(r.a.Component),N="https://burning-airlines-2021.herokuapp.com/reservations",D=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).handleClick=function(t){console.log("clicked value:",t.target.innerHTML),console.log("URL:",N),j.a.post(N,{seat_no:t.target.value,booking_code:n.state.bookingCode,flight_id:n.props.flightId,user_id:n.props.userId}).then((function(t){console.log("response:",t.data),n.props.history.push("/confirmation/"+n.state.bookingCode)})).catch(console.warn)},n.state={seatSelection:"",bookingCode:""},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=Math.floor(16777215*Math.random()).toString(16);this.setState({bookingCode:t})}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row justify-content-center",children:[Object(n.jsx)("div",{className:"text-align-right  col-2",children:Object(n.jsx)("strong",{children:this.props.seatPicked})}),Object(n.jsx)("div",{className:"text-align-left col-2",children:Object(n.jsx)("button",{className:"btn btn-primary",value:this.props.seatPicked,onClick:this.handleClick,children:"Select Seat"})})]})})}}]),a}(r.a.Component),F=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={selectedUser:"",selectedFlight:"",from:"",to:"",searchData:[]},t.fetchSearchData=function(e){t.setState({searchData:e})},t.fetchFromVal=function(e){t.setState({fromVal:e})},t.fetchToVal=function(e){t.setState({toVal:e})},t}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"container w-25 p-1",children:Object(n.jsx)(w,{from:this.fetchFromVal,to:this.fetchToVal,searchData:this.fetchSearchData})}),Object(n.jsx)("br",{}),Object(n.jsx)("hr",{}),Object(n.jsx)("br",{}),Object(n.jsx)(k,{from:this.state.from,to:this.state.to,selectedFlight:this.state.selectedFlight,searchData:this.state.searchData,userID:this.props.userID})]})}}]),a}(r.a.Component),C=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).welcome=function(t){return n.props.currentUser.length>0?"Welcome, ".concat(n.props.currentUser):""},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("ul",{className:"nav justify-content-center",children:[Object(n.jsx)("li",{className:"navbar-toggler",children:Object(n.jsx)(b.b,{className:"nav-link",to:"/",children:"Home"})}),Object(n.jsx)("li",{className:"navbar-toggler",children:Object(n.jsx)(b.b,{className:"nav-link",to:"/search",children:"Search"})}),Object(n.jsx)("li",{className:"navbar-toggler",children:Object(n.jsx)(y,{updateUser:this.props.updateUser})}),Object(n.jsx)("li",{className:"nav-link",children:this.welcome()})]}),Object(n.jsx)("hr",{})]})}}]),a}(r.a.Component),U=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){return Object(o.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("header",{children:[Object(n.jsx)("h1",{children:"Welcome to Burnt Airlines"}),Object(n.jsx)("p",{children:"Good luck."}),Object(n.jsx)("img",{id:"cover",src:"pexels-pixabay-46148.jpg",style:{width:"70%"}})]})}}]),a}(r.a.Component),I=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(o.a)(this,a),(n=e.call(this,t)).handleSeatSelected=function(t){console.log("Handle seleted",t)},n.handleSeatPicked=function(t){n.setState({seatPicked:t})},n.componentDidMount=function(){var t="https://burning-airlines-2021.herokuapp.com/flights/select/"+n.props.match.params.flight_id;console.log("thisone:",t),j.a.get(t).then((function(t){console.log("response: ",t.data.airplane.row),n.setState({row:t.data.airplane.row}),n.setState({col:t.data.airplane.column}),n.setState({flight:t.data})})),n.setState({flightId:n.props.match.params.flight_id}),n.setState({userId:n.props.match.params.user_id})},n.state={data:[],flightId:68,flight:[],col:0,row:0,seatPicked:"",userId:0},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(p,{flightId:this.props.match.params.flight_id}),Object(n.jsx)(x,{flightId:this.props.match.params.flight_id,row:this.state.row,col:this.state.col,handleSeatPicked:this.handleSeatPicked}),Object(n.jsx)(D,{handleSeatSelected:this.handleSeatSelected,seatPicked:this.state.seatPicked,flightId:this.props.match.params.flight_id,userId:this.props.match.params.user_id,history:this.props.history})]})}}]),a}(r.a.Component),T=a(6),V=function(t){Object(h.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={currentUser:[],currentUserID:[]},t.fetchFromVal=function(e){t.setState({fromVal:e})},t.fetchToVal=function(e){t.setState({toVal:e})},t.updateUser=function(e,a){t.setState({currentUser:e}),t.setState({currentUserID:a})},t}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{children:Object(n.jsx)("br",{})}),Object(n.jsxs)(b.a,{children:[Object(n.jsx)(T.a,{path:"/",render:function(e){return Object(n.jsx)(C,{currentUser:t.state.currentUser,currentUserID:t.state.currentUserID,updateUser:t.updateUser})}}),Object(n.jsx)(T.a,{exact:!0,path:"/",component:U}),Object(n.jsx)(T.a,{exact:!0,path:"/search",render:function(e){return Object(n.jsx)(F,{to:t.fetchToVal,from:t.fetchFromVal,userID:t.state.currentUserID})}}),Object(n.jsx)(T.a,{exact:!0,path:"/flight/:flight_id/:user_id",component:I}),Object(n.jsx)(T.a,{exact:!0,path:"/confirmation/:reservationid",component:f})]}),Object(n.jsxs)("footer",{children:[Object(n.jsx)("hr",{}),Object(n.jsxs)("p",{children:[" \xa9 Burnt Airlines Inc. ",Object(n.jsx)("a",{href:"https://burning-airlines-2021.herokuapp.com//users",target:"_blank",children:"Admin Page"})]})]})]})}}]),a}(r.a.Component),_=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,62)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,r=e.getLCP,c=e.getTTFB;a(t),n(t),s(t),r(t),c(t)}))};i.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(V,{})}),document.getElementById("root")),_()}},[[61,1,2]]]);
//# sourceMappingURL=main.f3b146c4.chunk.js.map